# 翻译质量标准

本文档定义了 Spec Kit CN 项目的翻译质量标准和检查清单, 确保中文版与原版保持完全一致的功能和用户体验.

## 翻译原则

### 核心原则
1. **功能对等**: 翻译后功能必须与原版完全一致
2. **用户导向**: 面向中文开发者, 提供友好的母语界面
3. **技术保留**: 代码层面保持英文, 确保技术准确性
4. **语义一致**: 不能新增或减少内容, 保持原版语义

### 翻译范围

**需要完全中文本地化的内容**: 
- 用户文档: README.md、spec-driven.md、docs/ 目录
- 模板系统: templates/ 和 templates/commands/ 目录下的所有文件
- 文档: docs/ 目录下的所有文件
- 项目章程: memory/constitution.md(包括占位符和说明文本)
- CLI 界面: src/specify_cli/ 中的输出信息、帮助文本、错误消息
- 项目级文件: CONTRIBUTING.md、SUPPORT.md、SECURITY.md、CODE_OF_CONDUCT.md

**保持英文不翻译的内容**:
- 构建脚本: scripts/ 目录(完全同步原版)
- 开发环境: .devcontainer/ 目录(完全同步原版)
- 媒体资源: media/ 目录(完全同步原版)
- CI配置: .github/ 目录(谨慎同步, 不翻译)
- 代码层面: 变量名、函数名、类名等标识符
- 章程占位符: 如 [PROJECT_NAME]、[PRINCIPLE_1_NAME] 等(保持原格式)
- **技术标记**: 脚本依赖的关键标记，详见"不可翻译技术标记"章节

## 术语处理标准

- 严格按照术语表 [@术语表](TERMINOLOGY.md) 执行翻译
- 对于新出现的术语, 询问用户后补充到术语表

### 中英文混排规则
```markdown
✅ 推荐: 
- 使用 Claude Code CLI 进行开发
- 支持 JSON 格式的配置文件
- 通过 GitHub API 获取数据

❌ 避免: 
- 使用Claude Code CLI进行开发
- 支持 JSON 格式的配置文件
```

### 命令替换规则
- 原文中的 `specify` 命令 → `specify-cn`
- 包名 `specify-cli` → `specify-cn-cli`
- 路径中的 `.specify` 开头保持不变

### 路径和斜杠命令处理准则

**重要说明**: 路径处理由发布脚本 `create-release-packages.sh` 中的 `rewrite_paths` 函数统一处理，翻译时不应修改原版路径格式。

#### 发布时的路径转换
发布脚本会自动将以下路径转换为 `.specify/` 前缀格式：
- `memory/` → `.specify/memory/`
- `scripts/` → `.specify/scripts/`
- `templates/` → `.specify/templates/`

#### 翻译时的处理原则
- **保持原样**: 翻译时保持原版路径格式不变
- **不添加前缀**: 不要在翻译时手动添加 `.specify/` 前缀
- **避免重复**: 防止发布时出现 `.specify.specify/` 的重复前缀问题

#### 正确示例
```markdown
✅ 翻译时保持原样:
- 读取 `memory/constitution.md` 中的项目章程
- 参考 `templates/plan-template.md` 模板
- 执行 `scripts/setup.sh` 脚本

❌ 翻译时错误添加前缀:
- 读取 `.specify/memory/constitution.md` 中的项目章程
- 参考 `.specify/templates/plan-template.md` 模板
- 执行 `.specify/scripts/setup.sh` 脚本
```

#### 斜杠命令处理
- **保持原版格式**: 斜杠命令格式与原版保持一致
- **不添加前缀**: 不要在翻译时添加 `/speckit.` 前缀
- **发布时处理**: 斜杠命令的前缀由发布脚本统一处理

#### 验证清单
- [ ] 翻译文件中的路径保持原版格式，未添加 `.specify/` 前缀
- [ ] 斜杠命令保持原版格式，未添加 `/speckit.` 前缀
- [ ] 确保发布时不会产生重复的 `.specify.specify/` 路径
- [ ] 所有内部引用与原版保持一致

## 不可翻译技术标记

### 重要说明
以下标记是**脚本依赖的技术标记**，必须保持英文格式，否则会导致自动化工具失效。

### 核心技术标记列表

| 标记 | 用途 | 出现位置 | 影响脚本 |
|------|------|----------|----------|
| `NEEDS CLARIFICATION` | 标记不明确的规划项 | 模板文件、计划文档 | update-agent-context.sh/.ps1 |
| `N/A` | 标记不适用项 | 模板文件、计划文档 | update-agent-context.sh/.ps1 |
| `TODO` | 标记待办事项 | 代码注释、文档 | 各种构建脚本 |
| `TKTK` | 标记占位符 | 模板、文档 | 分析工具 |
| `???` | 标记不确定内容 | 模板、文档 | 分析工具 |

### 严格遵守规则

#### ✅ 正确处理
- **保持原样**: `NEEDS CLARIFICATION`、`N/A` 等标记保持英文
- **解释说明**: 在用户界面文本中用中文解释标记含义
- **一致使用**: 在所有模板和文档中使用相同格式

#### ❌ 严禁操作
- **禁止翻译**: 不得翻译为 `需要澄清`、`不适用` 等
- **禁止修改**: 不得更改标记格式或大小写
- **禁用变体**: 不得使用如 `NEED-CLARIFICATION` 等变体

### 验证方法

1. **脚本验证**: 使用 `scripts/bash/update-agent-context.sh` 测试
2. **搜索检查**: 确保脚本依赖的标记未被翻译
3. **功能测试**: 验证标记过滤逻辑正常工作
4. **自动化检查**: 集成到翻译 QA 流程中

## 质量检查清单

### 文件完整性检查
- [ ] 所有需要翻译的文件都已找到
- [ ] 文件结构与原版保持一致
- [ ] 没有遗漏或多余的文件

### 翻译质量检查
- [ ] 术语使用是否一致
- [ ] 中英文混排是否恰当
- [ ] 技术准确性是否保持
- [ ] 语句是否通顺易懂
- [ ] 格式是否统一规范
- [ ] 链接和引用是否正确
- [ ] 代码示例是否保持原样

### 功能一致性检查
- [ ] CLI 输出信息正确本地化
- [ ] 帮助文本翻译准确
- [ ] 错误消息清晰易懂
- [ ] 交互界面符合中文习惯
- [ ] 模板文件占位符保持正确格式

### 路径和链接检查
- [ ] 所有路径和斜杠命令遵循路径和斜杠命令处理准则
- [ ] 翻译文件中的路径保持原版格式，未手动添加 `.specify/` 前缀
- [ ] 斜杠命令保持原版格式，未手动添加 `/speckit.` 前缀
- [ ] 内部链接指向正确
- [ ] 外部链接可访问

## 错误分类

### 严重错误(必须修复)
1. **功能错误**: 翻译导致功能异常
2. **信息缺失**: 遗漏重要内容
3. **术语错误**: 技术术语翻译错误
4. **路径错误**: 路径或链接错误

### 重要错误(建议修复)
1. **术语不一致**: 同一术语在不同文件中翻译不同
2. **格式问题**: 影响阅读的格式错误
3. **语句不通**: 影响理解的语法或表达问题

### 一般错误(可选修复)
1. **标点符号**: 中英文标点混用问题
2. **语言风格**: 轻微的表达不够优化
3. **格式细节**: 不影响功能的格式问题

## 输出报告结构

翻译审查报告应包含以下部分: 

1. **执行摘要**
   - 检查的文件总数
   - 发现的问题总数
   - 严重错误数量
   - 整体质量评估

2. **详细问题列表**
   - 按文件分类的问题
   - 问题描述和位置
   - 错误级别和修复建议

3. **术语一致性检查**
   - 术语使用情况统计
   - 不一致术语列表

4. **功能验证结果**
   - CLI 功能测试结果
   - 模板文件验证结果

5. **修复建议**
   - 优先修复的问题列表
   - 具体的修复方案

## 特殊文件翻译规则

### checklist.md 混合型文档翻译标准

`templates/commands/checklist.md` 是混合型文档, 包含用户指导和 AI 系统指令, 需分类处理: 

#### ✅ 必须翻译的内容
- 用户界面标题和说明文字
- 操作步骤和重要说明
- 质量维度名称(完整性、清晰度、一致性等)
- 示例的描述和解释文字

#### ❌ 保持英文的内容
- YAML Front matter 配置
- Generation algorithm(AI 算法逻辑)
- 技术实现指令和具体步骤
- 示例项目内容和代码块
- 系统标记(`[Completeness]`, `[Spec §X.Y]` 等)
- 变量占位符(`$ARGUMENTS`, `{SCRIPT}`)

#### 🔧 特殊处理
- 混合段落: 翻译说明文字, 保持示例英文
- 技术术语: `API`, `CLI`, `Git` 等保持英文
- 格式保护: 不破坏 Markdown 格式和系统标记
- 中文中始终使用你而不是您

## 参考资源

- [原版项目](https://github.com/github/spec-kit)
- [项目记忆文件](CLAUDE.md)
- [术语表](TERMINOLOGY.md)
- [版本记录](CHANGELOG.md)
